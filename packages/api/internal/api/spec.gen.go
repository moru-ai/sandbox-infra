// Package api provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package api

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"H4sIAAAAAAAC/+x9W2/cOLLwXyH0fQ87gGJ7kuzibIB9cJxk1jt2xnDbmQPMBgEtVXdzrduQlO3ewP/9",
	"gEVSoiTq0u32JYkxDxO3eK0qVhWrilVfgyhPizyDTIrgzdegoJymIIHjXzSKQIiz/BKyw3fqB5YFb4KC",
	"ymUQBhlNIXjTahMGHP4sGYc4eCN5CWEgoiWkVHWWq0J1EJKzbBHc3oYBLdivsOof2n5eb9SLkiVx76D2",
	"63pjZnkMvUOaj+uNWNAFy6hkeXbEUiZVoxhExFmhfgveBMf0hqVlSrIyvQBO8jlhElJBZE44yJJnpABO",
	"CrqAINSr+rMEvqqXleC47ipimNMykcGbn/f2wmCe85TK4E3AMvnqZRAGqZ7RfE5ZZv4K7fJZJmEBvLX+",
	"j3AjEf/dPRyUXORcLVlIyiWRSyAJE5LMeZ72LDurhhsGoKBZfJHf9GKl/r4eYiTQtHdQ83HdEdMioRIG",
	"Rq0arDPyrWosijwTgMf19d6e+l+UZxIypChaFAmLEEu7/xE5Yqge7/9zmAdvgv+3W/OAXf1V7L7nPOd6",
	"jiZK39KYqCWCkMFtGLze+/n+59wv5RIyaUYloNupyV/d/+Qfcn7B4hgyPePr+5/xYy7JPC+zWM/49/uf",
	"8SDP5gmLEKN/fQgqmgG/Am4xeWupHMl4//fZKSyYkHyFIonnBXDJNI3Ta7GPEkdJhrjLcfZ/nxHdgPwK",
	"K3L4jsxzTt4fnBLaIKIgbB+nUI2tJs4z/7D6G7leAgfkZGpUblZKmCBJHlEJcc/QM4g4yGrx/jl0I3cH",
	"05evf2iPerYqQAmPaqGdgSBTXP4Ptcbgc+jhXzVH+kN/Ddto8G7QBWg9bn7xH9CEth+nLJtpLv0rS5JT",
	"ECic2iifU5ZAfJCXmUdKfqyko+H3IIhcUkl0LyV6LlmSBF0ZFgbqw1oDixI3Ny+TZEV078ArHF2IubOE",
	"jc18vg2Dt0odOcoX7zMvuSdwBcnYKTvKF0fY7jYMUhBCqQSd/RzlC2I+Enu2PUQkJBTdzjMJBWEZUj0q",
	"UKTgOZIoByW4EM4o3PMFAdyKj0BZCkLS1DPBmf2kAN4eqFJUYirhhRolGCXTaqoaJKGBZgX2maSyFKdA",
	"DU9rgV4jxfxVqU5/fA49kAXdsg0OgTMQrqcIA9TgxtDZJInqYAeUc7oaxPGxwe81k8vu/CGJSs4hk8mK",
	"cChyLlm2IHmWaCaDvNj0WJMynAM3ihm7eIWFg5PzntN3cHJOopyDwKXhVvQpDHx664CmGirZlkEkDaPp",
	"4lmRSl5KP03mpVR0LyDKs1ig2oqrMZAkqjOhcwmcXC9ZtHSXSsQyL5OYwE3BOAwufG+Ui9hV+hjpAQdF",
	"dPv1Tay7y8i0kSNnT1/niFSjEOykhcSUMxgGzCORD2MlbeZMM1MFH3cOd+iyZF7hmVJxOXZo6lmOqbhk",
	"2eIdSMoSofprLbvD4GkKPSvqci7/9eZsCUQLAwPekYFaOMXd4uLsDGavoYOuzzWCz4Cm+yeHRnnYDL/7",
	"J4fkElbro9ZM8Bbnpkny2zx488cwTtR6z4Ui5s9hkJVJQi8S0NeaybRi1juFTC59StUpvSZXNCmhO2Bn",
	"gIQKeS7As64jKsxZl0smKiBeU0FKgUzPC8Tmnh+Fsnu366NF3dCQoCHMJiW+Y+LyGCRnkejSYAxXLPKs",
	"5x3+Tiylt4EwZwmIlZCQnnk12A/Vd6L6kr/AzmInJHAjX4fkZi5+8vIMJVdOcuYTLsfqGynURwummOGe",
	"PQdf0uTtStoNNs6V+kZEQSNQMuICW7l0yjL5t9dezVMRTc+oigA3GbQtZuv9hxYxHVC7C2ns1aJ6xv4L",
	"x289GGXikgj2X2iLZ7XmY/Z2XWEXBu+zq0/UWB3jmKl5aHLSIi93Ce+zK8bzLFVS+Ipyps6ZT1vokv37",
	"7Cr+BFx4L3rmg6ULyK5iwsssU6qSUYB7xw4Dfd/tMuc89tA1Nib4zQOuLoh61T4969gJNxO5+tcHnqeH",
	"KV2Ae9+OmRo7ZRmVei8pLQo1oL5997Ep99YeBouo6Gv4y8GJ05BXM/e0hgw4Taoet6GF7eqjMZ6pXd+G",
	"QZ7BBJnkLvM2HG7rrnS0bXudCr7uAB2iEMDVqdyPInVU/yV81DjTbYhpRP41++0j0vgvBycPYBFQWJxq",
	"EfBsx6ertuHUAUtBhbjOuUcIn5gv6nJVipr18Jqatg6BauzPnsFLAdwvgc/Nl+lL9QO1miGs4eKDaq+O",
	"0AGvEu4Qf1Ia0QmHObvxwBl/R8VGsTzdg1w1GaO+IOS8T5dy5pmVc+88+vc7zlMMbwJvpsxCR3SGJAbQ",
	"nXFRZzyCbCGXHnUQfx9eYp9gNgtuzhB68OKDoWIqR0xIiHuvszRh1CMu99XP1YqNv8Gr5ycMMqldFTEU",
	"HLRN02iwY+q67u0dtyiru/4QI61sArehEkWOCjLUy1FWbtXp7b0IkeslNMQ4uWZJ4rmjD16GoKlCDJrA",
	"naYoxNOcr8Y3dGzbYR9JYypHre2GJo5t87aTbAx5A4oNuu9gHahSQUynyVAVUtHktE3OsG3HuTa2Rdta",
	"W3K0yYaJxsrNhWecRbtOO9fZWJ0gF2zOAXCIoEHilm4tIJpkhkffGnq91l20bqKo0SbaJF8IR5TFcFEu",
	"0Oc6z4MwuKYcBR3qjj7pdpQvxDvGIZJeRbn65Fhsjend2L0uwDiqEZh2GfOcX1Oufrmg0SX+szN7GNy8",
	"UO1fXFEUf0J1bKznQzVK4+e31ZBmA7O85L4rqf59zaUrjOecovguFFoEWtGnL1/PeuYMU/964gx4GwbH",
	"NFqyDA4Vsrr3iaLc59GSSYhkycFvPqVOC7vRTN8BfMz5A01ZsvIPNcdvEwY5zmMfdaoxUvVp6hAfvVpV",
	"PUzmWDj8Y7UvP9UGnXW25gs7cNWIuDkDmmqjh4f7AU1Jih+N2d3xPHQNzY77Y1i0dhwiZo51fCKOx+U8",
	"8ylJg5MonUx103avv1gTuGBZBASKPFr+1Lq39hg7UNHxG09NxEnTQmeiCyC2yzH37gW7goyogfkVdTx6",
	"OkBm0AXUhINdEqI3KgZsDh2/9fHBCYnybM4WJdfBCF2LQ4/Vr9bWjx0doO3AUV82Mar8/PJ/fLD/CNeD",
	"boG7msZbMMfhPut5BzTUJL/+gnjMQH7RE/g01iS/rkAg82olSyC28w75XSkeAqRqMKeJgJAwSS5gSa/A",
	"yvUUiNJGCojYfMWyBYkhW/1WYp+9Hfxvd89SWQbyOueXBss79ZYv8jwBikocLWV+QksBDc+gnr4bupKn",
	"VN0sk2RFCtWpqW5o5xHqJsbF45sRavPYiLKJzZTSqAl7UMeMijuqlwZYE3t+1K0PELKo8EHkFV8z/J3Q",
	"JCHG8BvlaVpmNgAIGW1HW3XAtZ5SaCl48F7UcBPaMLq/+ti2IquEXXlto4aL7tzVG1jvz5y2Id/Q9rwE",
	"9fk2Fs2WXpKUQgKfBnXT2KsG5Kk3JPIAf7cD5DxagpAc7ZS9HqsP1g4yEt5h9H50Y0814+suMx0VAuvM",
	"Iqo+02aa5izrU6vSpjI5yBOcppo3WF/PUC9FDtYt1IiWXd+CkOUpjXt3YsC4RsyONd7nmQuiBsx77O2i",
	"umlipMT4nKYhmdnJW6fcP4u2mx5mQtIs8nIsawVmpk1t0BrFvAnnmIA+HQyD+tpE38jw+WtzDhsjjY7G",
	"7qZDh3lUy27huybH7tFrHvce5NV7q3hM83BY1qbNpx4GR6MlxBig4zntR0wgc9Kt9C1cEBa3aK8KAuqx",
	"VteBPs/89JmfPgg/hQFqHmOlk2LamkZrD6k/s8EJbFDzOZcHjTNCH8eruKiP9znhHe2w9NhaCETHuKEu",
	"dUiXByfnQ+e2akeqEL+J4rjqqS/JPeET+xj40JxJm1vXjdFwHRa+wI/6XU4drLi+khEV5QnwCLyqhQK4",
	"GrzEqM5Ct9OhrFPGjpm4FL5wHKljow0udfQnjZYYBbOb1tExU0+3GxXkjVdV8D8bDaXJNIFtgizd67w/",
	"rOajM7b1OG4cXNMg9h7KbKC2u0CPP8ABkMWdPZOzin+1o28xvrfJ/WrfNY3VlS7mlGXaLh3pWFj9R5kt",
	"gSZyuZpowa4XcmpGrn95V89R/3jgzlb/fF7P29jewZJmi+3dKkfjBdcXCi0yMAOoXZyCKNMhr2zTYjQs",
	"xLdkM3pki8VtGHxzTuo4TynziPy3VADRH533P5VtktP5nEWECWOjZBfJpPBPyK7aUdstgLjR2Mi2kFdn",
	"V3HTIrZdH/W2nMYP55oNA4ODQWjiz7W1T4HS4CtbVHNcMUoKnt+sdsYxuIFHuO3SNUek78L5HM3xCIfy",
	"AYJHnuCpf45MeY5M2Tgyxez9KF/4Y1O0R7npICc0i0nCMuhcJvFHf4wLywafLz7SE0NccBMOPQ864Qoy",
	"ad85TKAmNVLVBR9LgLE99oXJ91kVa//zXd+IPhKQa9C5bzoNQFrAd6Hsj/21hwoXqJqTvwgZ56Uk+Aoy",
	"Bs5/ci5T+hueAPXJGzFVzy/Gn5M2r3G8xIgTHbTV5XqTbuFt2vPcxBOztA7a7z5nd7oWKk04mgMHB2fH",
	"jiCZ9v7D9hgVEY1JvDE8x27Uy1Qe1W8e+tg1DE174BEV5bmA+CTqeRA7ZAaaJzmV3ZgYzcbRstBndYnx",
	"LU/vg6N+m4vq6H8uh8+Deq0sg1acwaUO2IYGB/Wv8njEGtQ/5I8ZybVGfJWjUThEXePCQbVDRy6xOryh",
	"GTbiDyf6zfeA23owsAXE5ODw3Sm5SPLoUigmf3hCaBxzNJtrDXvBUe/WN4cdsm/61a1ock1Xgkh6CURh",
	"HWJQMMyvgOuB3dY7a/n6cJEn5UXCojO9gIbhxkdZMx3RRFiDA5Lz0yPhBLLWtx/91h8ZXPPBiz/KyURJ",
	"9cM1hoytDda1gJJScXmqwwH/mQvPUiwIlrmQ+ILEaM54L7uA+vaEsUQGQCbAUHhlRUdbaqj1XgssdGVQ",
	"ZYPVLjN8v4MvhQf0BhC/M7nsfV3bcNX1ychplzAlBW871sxqfHX2zoCmnrOGGdk8N1bzINraD6Xq7csP",
	"IN5Zgm4P8fsS5BLq7vbyY05Aa0iHTMejm/pWU2f6Gr+c+UboXLtMbjDzYssAy921hezzK/5eq/wP/wjf",
	"UI83EcSWItGjPDMJTGb9/v+zJTg+zrqLExDQOu4TVFw3LOfUy1C9eZe0sQITHmrtZZLq+6ymjalpHjrw",
	"4MhSHnKBrkUjNZbr1qN09bPdZin8gUnTuIfpPcI6fGdJr02v3xjJ/SZ26DOyg8/MPl2BwRiw0Xsi4qVp",
	"BVRcTXWW086Vk/N0DJqKwTqZzMxjMXWU9QOLIXfCRZ02a4xjWoA7mbY2dRyMSMXaxNuAXm0tfSTRuPnr",
	"1U1N+Aq1s4JeZ2sDC4niblJ0A/dBgdedMV3QLJMJoturSwbeZJybzcXKo6c5SqJQUNn0HLbhMmAY2Mjk",
	"76PGsog3oHmNRt11Q4Or6zuocyVPcBEYZLrH1d2Ge8DalNrAT4NpNk9DWDHrJityGTzymy6XX4NBYtMp",
	"quq98jLNljdhZA/Pd+YsY2K53q5sn8nb2oTBiLuIqslHsN7U3c9ffeSq4M/e8+Q5k52T8IElcF4kOfWc",
	"iYKD8AYeuvx3zhLkvTTBeDJiOtnnchiN6mW5Jfdohec8cXz1OHZtqSpxnZg9cxROdu2dDftfTG9w/Ls3",
	"06kJQd9Wz++JqDw7W8v+WftwJixgLWWVV5lQRxfYSJ1614O2Lak5TZRV58rvkGqs8ShfiFOTYt3r0ntM",
	"UvD51zo7MNbTe4gs2iQCKI8ugatT7/EZVd8cs0L/9JtIA2RgB6nnzokBrSRaQnSJITY0wyxTcANRKcHy",
	"ukrVquMve5kFmiy8c+G9ekuzbNmC6eCnj5A+vXwapLQJ/rcMLb3tXkC9egbUMKDwIPjoaZ5XOVuGnta7",
	"Wsr1Mk+sIlYrFDgQnjFeZoTDgvI4AVHBul95mdvMiB4gqJ9tYjcqCCUXVHSZVv+hnfuyLg6hppum0Yzi",
	"GrXaxmCzijus8/tjl0JCMZrN3T57U22H5rOzTBLlFh8zCYVXknfcjj5daeT9R2dp1guJf2s35DVl5kGG",
	"fR7SnwHKLuEIFjRaPVtO72I5fbZ7Pts9n+2ez3bPO9o9XSXKKJr2ftqrcN4rh75/zvlwh+Vh7RAV3fhw",
	"Oxstw9MU9rYeT/ddNh+1UezzRZkqXlU//1Ozr0MKmFf+n1R4cuWqXy3IsFkVcOnM1NWR178CqKG2ovsP",
	"54zuX7UvhbOL03PkCb0GmYei81tnSb8zuayzmTw07xhIOmFyp3gsQWup29oZ5Mus8iCq1WPqJc86xtPW",
	"MTrsv1+BGFcatPDQDGaDTHBwrTOq2uO2Zjo4m8mPydVMHUA9l/PEcb/UWdQvgHLgHyzkNI19kW6xV6Qt",
	"bFbPvpSyqAoGNgbEWqpLoDE2N9VU//cFNnxx1kxZacIx1Tj4r7ExTg5f/OrCoO4/Kwt6QQX8PGUttnH/",
	"cmyLl4i5qaM1TqMdTKGCGQeYZFKxh+A456VNSaYw6+SEeRPs7fy8s4fVMwrIaMGCN8Grnb2dPQxYlktE",
	"5K7G0wvEkxYU3lhsXaWKUJLBdTttqCJCjFQ9jIM3wUkupEMewlS9BSHf5vFqa9VHW8lPWxHP5rbaqKD7",
	"covVbD1V2XylbTv11iBu1Jl0iuz6ZquWv6sa1eVbh9uqRu6xxRu/j6z/+Kyu+JIuMANIkxDw4DeJY/dr",
	"oxz4rSaSBKS3KpT6ndBsmFZ0M5da9lsVx92a5T2Gi7rJbrNeudpdiwJejzzI1vu5G5JMGeGxtq8fBaGK",
	"ee4qaS92v2pPwO1uFYu7i9VUe3nAryxJhPvYwq3JhG81GOZZReblYQrI4dXUZzhxFZb6q67h2kK1JwBa",
	"J9faqHD3WHxpl1S2Vyi5pxaur3JytwZtDeunSYdtua1pUJRpSrHwk9qwh2ZopXJaalXjWCot2ItLWCEi",
	"FtD3SEkNio9JjEYjOlT3C0itDmghdAf0TryYVMpZ1wswjGtbkMCzqUcWEV4VpsVoLLqUnjpBfXD35+cU",
	"DtLuRXNwMfUoikN7AR5m13gG9MT0hvWIwj3Su1+1OjtRfximFaM+aGrZN+OurzTYjtP0hQZyvnV9Ye3T",
	"TWXksQPqy+kYuk5U5y1ja/vsoXPRnsQh9kYIxVz5fxBCUSde5wHsFeH/xM86zsAnuPX3YAqgjdVVJ/+p",
	"4LsedBHJu1kewwStQzfzLPqj+bAdXWOavxaz9WNFys01Dr2hBxMqfp3Rpwniwna/6sy6t72Y+QWkTjBq",
	"6l/5EfPR5uddj+OYtL634ToJKvGW8mcJ+LzQXFMa2X+fxM3ESYc+mV6qZKTf0HWkTVq9aipmKSWiiryh",
	"Nu9qV0ndBkndkwjrpF29NTJsVLcxuLUQQL8IDvEtSK7pbKWRbmGY19u86G6W7g57cV/YDpoxqsRGyBq0",
	"t1TmZM4SG99WX5OxFDr5N9aJ/Qe9iP5d7u29/Bstin8UPI//Hfy0Q97TaInqBc1iXWdLkLQUklwAOT89",
	"IpBFeQzxTg9DqjL8ufxo2/xnTXHWSiZ/N7nWRR4S494UYtx7QHno+Cz++KwEzcZKWDPRx8hl3OZMwayE",
	"Lcdal+G5RH5P9/IK7Q97KW9M2+WIbnLJ/tv4D0JUDfa565S86Gejbip6HRI0jZke1+UIhnjqQZ6m9IUA",
	"1UihJmnWtiCH7zDUdwGNlQRhADdFgqWuTPiJj0WaQb6wWAzal/ujI1J6c6g//ry312JmYVBm7M8STAOk",
	"83tV+LzZiO7GUnU+krSuEPCDHoWvVTLWQcuWtoc72aR8Jq0KTTMnwet6KmadGnaiWavF6Kz34elrffcl",
	"PHtvmrXgvFgRvLP187B7QuDWOcImt0BRV/z5Ycii98zvmvIb/e7TU4SdqIgn1lmmdshhM8UfE7osRIzV",
	"Tm2yO66LUOyQs7Mj1QQDueBGQmYU/AGFrSJCU7TjzrS4feXPrGwtBXDvMRRA+1TeJv+7DR9LFTUU8WCq",
	"6Hd6bu1D71527ySTFtN4/ZFuufEZC73v5JTWJT0puHur2xOWkZQlCTPZxvrMkiUXqA97bJI2YnO4fG3H",
	"ymEqf9cZ5kaK8PuWlTBd0KxeVV3oRinS3YI1elbzeWzFviljxiEyKRenHVeF6XdVLw8oPmjLzsXK5CFX",
	"S/EkI0chkOWyjqMJDXx0wI2CX58Vx02dvhaTaaaffwgtAw/GJjqGPnzPDEsxrLE7t8uz6op+E9hW7337",
	"DpyrynmouVb9CIXyqjaprfofOiWpQmyq8/3WuRT7WBgOdzcO5j1ZmIvSZUATtgZZvNnG1lvy54eIaGpl",
	"Fd7UFOse5AcwFHyn576wJeb81wusQNfKVD3lTqAr1z20eUHfcBq6KzoxIpo5t537xPzrvb9Pafv3b4xK",
	"OMw5iCWIoYsoNmkcS32TVComk8IkYtZ1AyeS0Wk17+NcLptvYeJSL9gTWWa+tNiwhUOtnl5CIQnFyok1",
	"93bVzFd/G9cz26kfJvphW2xUQ/aBjC5PgILV2W+S73B6Z12gcwPepzs+QXNIq+To0/WH9Rshnrn2GjTv",
	"lHP18+wZSLcmbLuY6w458xcuJDeWdTleXlZnrzfEu0MOaJKghWHJhFLSlnlM0jKRrEjAvO/Mr4BfcybN",
	"U8+zs6NQl5bGAUuhuwOxueSdQkui1vpVKyxArQRMClSUJmGk3Zrl3VONmmdVmdzHlzuNsrztt6dqc7Uo",
	"qfHhwstkOuoVTN1ylJPq9XbTxqtVft6KfBKGNKvinGb0H01rx1dV056seC/kZ+bDQ0bb4EvTOwbZ6A09",
	"nDO3/fR4CI2NADD1m4Oq+gHcFIuKG8TgvJj3Y1E/cNvUnmKesz0bU74vY4pT3+VOlhRZ14K5ZzPKqylt",
	"Xz0Zhjx6wHdTejN4yJGGjPPCd+BtZhsdxWQpchobOKY3z5zgyXOCsKd+qMzVIeQMrqBBJRh0a+LJekJs",
	"OWYC6Q8ds4kc64I9X0S3Ys8XRMYXjjV7HvaVwDG9cXnXM6/aNq/SQbeTdEfb1Mty6o8tNuOjzOrRfN9B",
	"nJwQ+PND66wmSPnOequF1yMGIm6szdarbwZ6D1vKWu+wB6K9XWq6DwuXN5H9JDvXy62vweTA7TF31RVA",
	"aBRBIa1b4slFuW6DlBoMSSlQNqvV1OfaPSSlW1REddbIlrWmTlR1ne56aiT72saj7SfIA4ZFh5N0bwBN",
	"rhjZEo7C0dYFXbAM1/ARbqTJprROtyMMFbpXHciTVHFNRcgSIJNL9LGZ3G7fYhB8S/YM5gToFzKq270w",
	"hPsTVs0snxsnBujkSexNDvD0X1I8sAJzCloc02yi+vJtENa3qwV9B5rNrmbFu19N/ubbdXzPuoSFW5li",
	"EjFqGfK2Thh9j/LVpqX2CMiXfu6kkb2kVXXm7xfX4/HfrWTcfWHgY0jeKCh8Q0Q/B5B/wwHk3r3AFSTr",
	"DHqEHTygneUlj2AS9uc8T/sswzjKWrvUE9+zqbK/wN9m2rpz5J+mO9vPLafq+tvgn3V1yKkctC9JzxgH",
	"ndnijo/DQw+zGG7qKgGGoVYU0nuM8MbXTnTvO+P5Qvw2nwvoYVp7awd9fC9sdWPu92CsBgvTbsRinvmK",
	"5itYPmT365KK5XCeL5qZWsIkYdmlNWhRrgsOK9RSljknk65Af5uqtX2o6p3ckdN4MhUv9bD9zsCR+iqT",
	"vC8/3w+NO9Wme+6ILl5MIejc/og0b7D0HTz+uL/zcfVynfRUg5lUPr38nhNT9b21rBd6sSJ5BiTnJM25",
	"TmqGkJiU+EVqSb3Zi6mZNKy9XZtGyBUWblBS8luyjT9n8XrM0NKrl80oge27ez+9fAyH76eXT93YaSDx",
	"XWX8GpE+GxlJ1zWJOvT2FIyi90zuthr2dGJ/WjbZbRDWqz4WtiHDevUoDOvVYzGsbkHQZ97lkhgOyK8s",
	"ryh5YoqLiTe7u7RgO2nOyx2WB84IX+tYuDoU7Gsr9V/zR4zbc/9uFNlxP9hs6Lefb/8vAAD//1SknRaJ",
	"5QAA",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
